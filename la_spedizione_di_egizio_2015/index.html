<!DOCTYPE html>
<html lang="en" ng-app="c3app">
  <head>
    <title>Egizio2015 - La spedizione di Egizio 2015</title>

    <meta name="description" content="La storia che spiega perchè il museo egizio più importante d'europa è a Torino." />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">

		<!-- Twitter Card data -->
	    <meta name="twitter:card"        content="summary_large_image">
	    <meta name="twitter:creator"     content="@CSP_live">
	    <meta name="twitter:title"       content="La strada per Menfi e Tebe passa da Torino">
	    <meta name="twitter:description" content="La storia che spiega perché il Museo Egizio più importante d'Europa è a Torino.">
	    <meta name="twitter:image:src"   content="http://compagnia.egizio2015.it/imgs/social/twitter/egizio2015_la_strada_tra_menfi_e_tebe.jpg">

	    <!-- Open Graph data -->
	    <meta property="og:title"       content="La strada per Menfi e Tebe passa da Torino" />
	    <meta property="og:type"        content="website" />
	    <meta property="og:url"         content="http://compagnia.egizio2015.it" />
	    <meta property="og:image"       content="http://compagnia.egizio2015.it/imgs/social/facebook/egizio2015_la_strada_tra_menfi_e_tebe.jpg" />
	    <meta property="og:description" content="La storia che spiega perché il Museo Egizio più importante d'Europa è a Torino." /> 
	    <meta property="og:site_name"   content="egizio2015.it" />


    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="../css/style.css" type="text/css">
	<link href="css/screen.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" type="text/css">
	<link rel="stylesheet" href="../css/landscape-style.css" type="text/css">
	<link rel="stylesheet" href="../css/portrait-style.css" type="text/css">
	<link rel="stylesheet" href="../css/lores-style.css" type="text/css">
    
    
    
    <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
	<script src="js/jquery.ui.map.full.min.js" type="text/javascript"></script>


    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 560px;
      }
      #legend {
		  background: none repeat scroll 0 0 rgba(255, 255, 255, 0.7);
		  border: 1px solid #000;
		  color: #262626;
		  font-family: "din";
		  letter-spacing: 0.5px;
		  margin: 10px;
		  padding: 3px 10px 10px;
		  text-align: left;
		  text-transform: uppercase;
	  }
      #legend h3 {
        margin-top: 0;
      }
      #legend img {
		  margin-right: 5px;
		  margin-top: 10px;
		  vertical-align: middle;
		  width: 25px;
	  }
    </style>



   <!-- *************************************************************

   	already linked above
   	
   	<script src="https://maps.googleapis.com/maps/api/js"></script>
	
	************************************************************** -->

	<script src="../js/jquery-1.9.1.min.js"></script>
	<script src="js/c3-menu.js"></script>
	<script src="js/scripts.js"></script>
	<script src="js/masonry.pkgd.js"></script>
	<script src="js/jquery.lazyload.js"></script>
	<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

	<script>
		$(document).ready(function(){
		  $( '#dvLoading' ).animate({
				 opacity: .5,
				 top:"-100%"
				 }, "slow", function() {
				 // Animation complete.
			 });
			$( '.cover' ).fadeIn( "slow" );
			
			var container = document.querySelector('#wall');
			var msnry = new Masonry( container, {
			  // options
			  	columnWidth: 194,
			  	"isFitWidth": true,
			  	itemSelector: '.item',
				"gutter": 10			  
			});
			
		});		
		
		$(document).ready(function() {
		  $('#play-video').on('click', function(ev) {
 
			$("#video-player")[0].src += "&autoplay=1";
			ev.preventDefault();
 
		  });
		});
		
		$(window).scroll(function (event) {
		// console.log($(window).scrollTop());
			if ($(window).scrollTop()>436){
				$( ".menu" ).css({
				  "position": "fixed",
				  "top": "124px"
				});
				$( ".tappa-aperta" ).css({
				  "position": "fixed",
				  "top": "186px"
				});
				$( "#cover" ).css({
				  "position": "fixed",
				  "top": "-436px"
				});
				$( ".body-tappa" ).css({
				  "top": "710px"
				});
				$( ".body-tappa" ).css({
				  "top": "710px"
				});
				$( "#wrapper" ).css({
				  "top": "620px"
				});
				/*$( ".arrow" ).css({
				  "position": "fixed",
				  "top": "274px"
				});*/
			}
			else{
				$( ".menu" ).css({
				  "position": "relative",
				  "top": "auto"
				});
				$( ".tappa-aperta" ).css({
				  "position": "relative",
				  "top": "auto"
				});
				$( "#cover" ).css({
				  "position": "relative",
				  "top": "auto"
				});
				$( ".body-tappa" ).css({
				  "top": "auto"
				});
				$( "#wrapper" ).css({
				  "top": "auto"
				});
				/*$( ".arrow" ).css({
				  "position": "absolute",
				  "top": "0px"
				});*/
			}
			
			
			if ($(window).scrollTop()>400){
				$( "#cover .intro" ).css({
				  "position": "fixed",
				  "top": "40px",
				  "opacity":"0"
				  
				});
			}
			else{
				$( "#cover .intro" ).css({
				  "position": "absolute",
				  "top": "440px",
				  "opacity":"1"
				});
			}
			
			
		});
		
	</script>

    <script>
      var map;

      function initialize() {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
          zoom: 12,
          minZoom:12,
          maxZoom:18,
          center: new google.maps.LatLng(45.083256, 7.697353),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          panControl: false,
		  zoomControl: true,
		  zoomControlOptions: {
			position: google.maps.ControlPosition.RIGHT_CENTER
		  },
		  mapTypeControl: false,
		  scaleControl: false,
		  streetViewControl: false,
		  overviewMapControl: false,
		  scrollwheel: false,
          styles: [
            {
              featureType: 'road',
              elementType: 'geometry',
              stylers: [
                { color: '#d1ac88' },
                { weight: 1 }
              ]
            }, {
              featureType: 'road',
              elementType: 'labels',
              stylers: [

//                 { saturation: -100 },
//                 { invert_lightness: true }
              ]
            }, {
              featureType: 'landscape',
              elementType: 'geometry',
              stylers: [
                { hue: '#0000ff' },
                { gamma: 1.4 },
                { saturation: 82 },
                { lightness: 96 }
              ]
            }, {
              featureType: 'poi.school',
              elementType: 'geometry',
              stylers: [
                { hue: '#00ff00' },
                { lightness: -15 },
                { saturation: 99 }
              ]
            }, {
              featureType: 'poi',
              elementType: 'geometry',
              stylers: [
                { visibility: 'off' }
              ]
            }, {
              featureType: 'water',
              elementType: 'geometry',
              stylers: [
                { visibility: 'on' },
                { color: '#85c5e8' }
              ]
            }, {
              featureType: 'landscape',
              elementType: 'geometry',
              stylers: [
                { visibility: 'on' },
                { color: '#fffbf8' }
              ]
            }/*, {
              featureType: 'all',
              elementType: 'label',
              stylers: [
                { visibility: 'off' },
              ]
            }*/
            
          ]
        });

        var iconBase = 'img/element/';
        var icons = {
          endtour: {
            name: 'Tappa Passata',
            icon: iconBase + 'tappa_passata.png'
          },
          intour: {
            name: 'Tappa Corrente',
            icon: iconBase + 'tappa_corrente.png'
          },
          pretour: {
            name: 'Tappa Futura',
            icon: iconBase + 'tappa_futura.png'
          }
        };

        function addMarker(feature) {
          var marker = new google.maps.Marker({
            position: feature.position,
            icon: icons[feature.type].icon,
            map: map,
            myIndex: i,
            animation: google.maps.Animation.DROP,
            size: new google.maps.Size(42, 53),
            optimized: false
          });
          
         google.maps.event.addListener(marker, 'click', function() {
    		console.log("pos:",marker.getPosition().k);
			var state = angular.element('body').injector().get('$state');
			if ( marker.getPosition().k == 45.054279){
				console.log("san salvario");
				state.go('tappa1');
			}
			
			if ( marker.getPosition().k == 45.034818){
				console.log("regina margherita");
				state.go('tappa2');
			}
    		
    		if ( marker.getPosition().k == 45.117221){
				console.log("auchan");
				state.go('tappa3');
			}
			
			if ( marker.getPosition().k == 45.067811){
				console.log("università");
				state.go('tappa4');
			}
			
			if ( marker.getPosition().k == 45.068946){
				console.log("san federico");
				state.go('tappa5');
			}
			
		 });
		 
          
        }
        

        var scope = angular.element('body').scope()
        var features = [
          /* Casa del quartiere di san salvario - 10126 Torino */
          {
            position: new google.maps.LatLng(45.054279, 7.678198),
            type: scope.status.tappa1
          },
          
          /* Ospedale Infantile Regina Margherita, piazza Polonia 94 - 10126 Torino */
          {
            position: new google.maps.LatLng(45.034818, 7.674729),
            type: scope.status.tappa2
          },
          /* Auchan */
          {
            position: new google.maps.LatLng(45.117221, 7.711770),
            type: scope.status.tappa3
          },
          /* Università */
          {
            position: new google.maps.LatLng(45.067811, 7.694571),
            type: scope.status.tappa4
          },
          /* Galleria San Federico - 10121 Torino */
          {
            position: new google.maps.LatLng(45.068946, 7.683237),
            type: scope.status.tappa5
          }
        ];

        for (var i = 0, feature; feature = features[i]; i++) {
          addMarker(feature);
        }
        
                

        var legend = document.getElementById('legend');
        for (var key in icons) {
          var type = icons[key];
          var name = type.name;
          var icon = type.icon;
          var div = document.createElement('div');
          div.innerHTML = '<img src="' + icon + '"> ' + name;
          legend.appendChild(div);
        }

        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
        


        
        google.maps.event.addListener(map, 'zoom_changed', function() {
			if ( map.getZoom() == 12){
				setTimeout(function() {
					 $( "#veil" ).fadeIn(600, function() {
					 // Animation complete.
					 });
					 $( "#active-veil" ).fadeIn(600, function() {
					 // Animation complete.
					 });
					 $("#cover h1").fadeIn( 350, function() {
					 // Animation complete.
					 });
					 $("#quote").fadeIn( 350, function() {
					 // Animation complete.
					 });
				 }, 300);
			}
		   });


		
		google.maps.event.addListener(map, 'dblclick', function() {
			map.setZoom(12);
			setTimeout(function() {
				 $( "#veil" ).fadeIn(600, function() {
				 // Animation complete.
				 });
				 $( "#active-veil" ).fadeIn(600, function() {
				 // Animation complete.
				 });
				 $("#cover h1").fadeIn( 350, function() {
				 // Animation complete.
				 });
				 $("#quote").fadeIn( 350, function() {
				 // Animation complete.
				 });
			 }, 300);
			
		   });
        
      }

      // move to angular controller init()
      // google.maps.event.addDomListener(window, 'load', initialize);
     
	  
    </script>


    
    
  </head>
  <body ng-controller="AppCtrl" id="c3">
  	
  	<div id="dvLoading"></div>
  	<div id="rotate-device" class="white">
		<div>
			<img src="../imgs/element/rotate-device.png">
			<h3 translate="{{ 'ROTATE-DEVICE' }}">per favore ruota il tuo dispositivo<br/>per una visualizzazione corretta</h3>
		</div>
	</div>
	<div id="resize-browser" class="white">
		<div>
			<img src="../imgs/element/resize-browser.png">
			<h3 translate="{{ 'RESIZE-BROWSER' }}">allarga la finestra del browser<br/>per visualizzare correttamente questo sito</h3></div>
		</div>
	</div>
	<header>
		<a id="logo-wrap" ng-href="{{goBack()}}">
			<svg version="1.1" id="Layer_1" x="0px" y="0px"
				 width="100px" height="41.5px" viewBox="0 0 100 41.5"
				 style="position:fixed; top:10px; left:10px; z-index:9000;"
				 shape-rendering="geometricPrecision">
			<g id="box" opacity="0.25">
				<rect x="0" y="0" fill="none" width="100" height="22" stroke="#000000" stroke-width="2"/>
			</g>
			<g id="arrow" opacity="0">
				<polygon fill="#000000" points="12.695,15.557 8.369,11.231 12.948,6.652 13.95,7.654 10.373,11.231 13.697,14.555 	"/>
			</g>
			<g id="back">
				<path fill="#000000" d="M41.769,12.879c0,0.392-0.064,0.738-0.192,1.038s-0.306,0.552-0.534,0.756
					c-0.228,0.204-0.5,0.358-0.815,0.462c-0.316,0.104-0.662,0.156-1.038,0.156h-3.456V6.747h3.324c0.8,0,1.43,0.208,1.89,0.624
					s0.689,0.988,0.689,1.716c0,0.232-0.031,0.446-0.096,0.642c-0.063,0.196-0.149,0.372-0.258,0.528
					c-0.108,0.156-0.232,0.288-0.372,0.396c-0.14,0.108-0.282,0.19-0.426,0.246c0.168,0.064,0.328,0.154,0.479,0.27
					c0.152,0.116,0.288,0.254,0.408,0.414s0.216,0.348,0.288,0.564S41.769,12.607,41.769,12.879z M40.34,9.135
					c0-0.4-0.128-0.704-0.384-0.912s-0.592-0.312-1.008-0.312h-1.92v2.448h1.92c0.416,0,0.752-0.104,1.008-0.312
					C40.212,9.839,40.34,9.535,40.34,9.135z M40.473,12.819c0-0.384-0.12-0.696-0.36-0.936c-0.24-0.24-0.588-0.36-1.044-0.36h-2.04
					v2.604h2.04c0.456,0,0.804-0.122,1.044-0.366S40.473,13.203,40.473,12.819z"/>
				<path fill="#000000" d="M48.597,15.291l-0.589-1.716h-3.371l-0.589,1.716h-1.38L45.8,6.747h1.045l3.132,8.544H48.597z
					 M46.353,8.691l-1.332,3.792h2.628L46.353,8.691z"/>
				<path fill="#000000" d="M56.877,12.735c-0.072,0.424-0.199,0.8-0.379,1.128c-0.18,0.328-0.404,0.602-0.672,0.822
					s-0.572,0.388-0.912,0.504s-0.701,0.174-1.086,0.174c-0.447,0-0.859-0.078-1.236-0.234c-0.375-0.156-0.711-0.382-1.008-0.678
					c-0.207-0.208-0.367-0.428-0.479-0.66c-0.113-0.232-0.195-0.484-0.246-0.756c-0.053-0.272-0.082-0.574-0.09-0.906
					c-0.01-0.332-0.014-0.702-0.014-1.11s0.004-0.778,0.014-1.11c0.008-0.332,0.037-0.634,0.09-0.906
					c0.051-0.272,0.133-0.524,0.246-0.756c0.111-0.232,0.271-0.452,0.479-0.66c0.297-0.296,0.633-0.522,1.008-0.678
					c0.377-0.156,0.789-0.234,1.236-0.234c0.793,0,1.461,0.224,2.004,0.672c0.545,0.448,0.893,1.1,1.045,1.956h-1.32
					c-0.104-0.432-0.299-0.784-0.582-1.056s-0.666-0.408-1.146-0.408c-0.256,0-0.492,0.046-0.707,0.138
					c-0.217,0.092-0.4,0.218-0.553,0.378c-0.104,0.112-0.189,0.234-0.258,0.366c-0.068,0.132-0.119,0.296-0.156,0.492
					c-0.035,0.196-0.062,0.438-0.078,0.726s-0.023,0.648-0.023,1.08s0.008,0.792,0.023,1.08s0.043,0.53,0.078,0.726
					c0.037,0.196,0.088,0.36,0.156,0.492c0.068,0.132,0.154,0.254,0.258,0.366c0.152,0.16,0.336,0.286,0.553,0.378
					c0.215,0.092,0.451,0.138,0.707,0.138c0.48,0,0.865-0.136,1.152-0.408c0.289-0.272,0.484-0.624,0.588-1.056H56.877z"/>
				<path fill="#000000" d="M63.74,15.291l-2.4-4.212L59.9,12.807v2.484h-1.295V6.747H59.9v4.296l3.492-4.296h1.584l-2.771,3.348
					l3.061,5.196H63.74z"/>
			</g>
			</svg>
			<img id="logo" src="../imgs/element/compagnia-san-paolo-logo.png" />
			<img id="logo-black" src="../imgs/element/compagnia-san-paolo-logo-black.png" />
		</a>
		<a ng-href="{{goBack()}}">
			<img class="logo-elements" id="logo-top" src="../imgs/element/logo-1.png">
			<img class="logo-elements" id="logo-bot" src="../imgs/element/logo-4-black.png" ng-if="lang=='it'">
			<img class="logo-elements" id="logo-bot" src="../imgs/element/logo-4-en-black.png" ng-if="lang=='en'">
		</a>
	</header>


    <div class="shadow top"></div>
    <div class="container">

		<div id="cover">
			<div id="map_canvas"></div>
			<div id="legend"><!-- <h3>Legend</h3> --></div>
			<div id="active-veil"></div>
			<div id="veil"></div>
			<h1 translate="{{ 'C3-TITLE' }}"></h1>
			<p translate="{{ 'C3-INTRO' }}" class="intro" id="quote"></p>

			
			

		</div>

    	<!-- main menu -->
			<div class="menu">
				<!-- ui-sref-active -> add active class based on active route -->
				<!-- ui-sref -> navigate to route state -->
				<ul>
					<!-- CASA DEL QUARTIERE -->
					<li ui-sref-active="active" class="{{status.tappa1}}">
						<a ui-sref="tappa1" class="prima-tappa" id="tappa-1">
							<span translate="{{ 'MENU-TAPPA1-DATA' }}" class="data-tappa"></span>
							<span translate="{{ 'MENU-TAPPA1-NOME' }}" class="nome-tappa"></span>
						</a>
					</li>
					<!-- OSPEDALE REGINA MARGHERITA -->
					<li ui-sref-active="active" class="{{status.tappa2}}">
						<a ui-sref="tappa2" id="tappa-2">
							<span translate="{{ 'MENU-TAPPA2-DATA' }}" class="data-tappa"></span>
							<span translate="{{ 'MENU-TAPPA2-NOME' }}" class="nome-tappa"></span>
						</a>
					</li>
					<!-- LE GRU -->
					<li ui-sref-active="active" class="{{status.tappa3}}">
						<a ui-sref="tappa3" id="tappa-3">
							<span translate="{{ 'MENU-TAPPA3-DATA' }}" class="data-tappa"></span>
							<span translate="{{ 'MENU-TAPPA3-NOME' }}" class="nome-tappa"></span>
						</a>
					</li>
					<!-- CAMPUS LUIGI EINAUDI -->
					<li ui-sref-active="active" class="{{status.tappa4}}">
						<a ui-sref="tappa4" id="tappa-4">
							<span translate="{{ 'MENU-TAPPA4-DATA' }}" class="data-tappa"></span>
							<span translate="{{ 'MENU-TAPPA4-NOME' }}" class="nome-tappa"></span>
						</a>
					</li>
					<!-- GALLERIA SAN FEDERICO -->
					<li ui-sref-active="active" class="{{status.tappa5}}">
						<a ui-sref="tappa5" class="last" id="tappa-5">
							<span translate="{{ 'MENU-TAPPA5-DATA' }}" class="data-tappa"></span>
							<span translate="{{ 'MENU-TAPPA5-NOME' }}" class="nome-tappa"></span>
						</a>
					</li>
				</ul>
			</div>

			<!-- main tag to include partials views -->
			<div ui-view class="container-tappa"></div>
    </div>


    <!-- ** angular app dependencies ** -->
	<script src="../angularjs/angular/angular.min.js"></script>
	<script src="../angularjs/angular-ui-router/release/angular-ui-router.min.js"></script>
	<script src="../angularjs/angular-translate/angular-translate.min.js"></script>
	<script src="../angularjs/angular-sanitize/angular-sanitize.min.js"></script>
	<script src="../angularjs/angular-translate-loader-static-files/angular-translate-loader-static-files.min.js"></script>
	<script src="../angularjs/angular-cookies/angular-cookies.min.js"></script>
	<script src="../angularjs/angular-translate-storage-cookie/angular-translate-storage-cookie.min.js"></script>
	<script src="../angularjs/angular-translate-storage-local/angular-translate-storage-local.min.js"></script>

	<!-- social -->
	<style rel='stylesheet' type='text/css' href="../angularjs/angular-socialshare/angular-socialshare.min.css"></style>
	<script src="../angularjs/angular-socialshare/angular-socialshare.js"></script>
	<script src="http://platform.twitter.com/widgets.js"></script>

	<!-- c4 widget -->
	<!-- underscore -->
	<script src="../angularjs/underscore/underscore.js"></script>
	<script src="../angularjs/angular-underscore-module/angular-underscore-module.js"></script>
	<!-- sails socket -->
	<script src="../angularjs/sails.io.js/dist/sails.io.js"></script>
   <script src="../angularjs/angular-sails/dist/angular-sails.js"></script>
   <!-- ** main widget app ** -->
	<script src="../c4widget/user.widget.js"></script>
	<c4-user-widget></c4-user-widget>

	<!-- ** main app ** -->
	<script src="angularapp/app.js"></script>
	<script src="angularapp/config.js"></script>
	<script src="angularapp/routes.js"></script>


  </body>
  
</html>
